<% title @lesson.name %>
<div class="row lead">
  <div class="col-md-12"><h1><%= @lesson.name %></h1>
    <hr>
  </div>
</div>

<div class="col-md-12">
<div class="col-sm-3">
    <div class="icon text-center">
    </div>
    <div class="attribute text-center"><p><strong>Lesson Price</strong></p>
      <p style="margin-top: -10px;">&euro;<%= @lesson.price %>.00</p>
      <hr>
    </div>
  </div>
  <div class="col-sm-3">
    <div class="icon text-center">
    </div>
    <div class="attribute text-center"><p><strong>Lesson Dificulty</strong></p>
      <p style="margin-top: -10px;"><%= @lesson.difficulty %></p>
      <hr>
    </div>
  </div>
  <div class="col-sm-3">
    <div class="icon text-center">
    </div>
    <div class="attribute text-center"><p><strong>Equipment Provided</strong></p>
      <p style="margin-top: -10px;"><%= @lesson.equipment_provided %></p>
      <hr>
    </div>
  </div>
  <div class="col-sm-3">
    <div class="icon text-center">
    </div>
    <div class="attribute text-center"><p><strong>Equipment Required</strong></p>
      <p style="margin-top: -10px;"><%= @lesson.equipment_required %></p>
      <hr>
    </div>
  </div>
  <hr>
</div>

<div class="row show-page">
  <hr>

  <div class="col-md-4 ">

    <% @lesson.photos.each do |photo| %>
    <%= cl_image_tag photo.path, width: 350, height: 300, class: "show-img", crop: :fill %>
    <% end %>
  </div>
  <hr>
  <div class="col-md-8">
    <div class="row">
      <h4 class="col-md-3">About Lesson: </h4><p class="col-md-8"><%= @lesson.description %></p>
    </div>
    <hr>
    <div class="row">
      <h4 class="col-md-3">Cancellation Policy: </h4><p class="col-md-6"><%= @lesson.cancellation_policy %></p>
    </div>
    <hr>
    <div class="row">
      <h4 class="col-md-3">Location: </h4><p class="col-md-6"><%= @lesson.address %><br/>
        <%= @lesson.city %>
      </p>
    </div>

  </div>
  <div class="col-md-12">
    <hr>
    <% if current_user.schools.any? %>
    <button type="button" class="btn btn-brand"><%= link_to "Go back to Schools", school_path, class: "btn btn-brand"%>
    </button>
    <button type="button" class="btn btn-brand">
      <%= link_to "Add New Lesson", new_school_lesson_path(@school) , class: "btn btn-brand" %>
    </button>
    <button type="button" class="btn btn-brand">
      <%= link_to "Add New Slot", new_school_lesson_lesson_slot_path(@school, @lesson) , class: "btn btn-brand" %>
    </button>
    <% else %>
    <p><%= link_to "Become a Partners", new_school_path %>
    </p>
    <% end %>
  </div>
</div>
<hr>
<div class="row">

</div>
</div>
<div id="map"></div>
<script src="https://maps.google.com/maps/api/js?key=AIzaSyAmoKxzVm-cfE0iboHQnMYjql_oClX8pMk"></script>
<!-- Include Dependencies of GMaps for Rails gem -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-marker-clusterer/1.0.0/markerclusterer_compiled.js"></script>
<script src="https://cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js"></script>
<script src="https://cdn.rawgit.com/apneadiving/Google-Maps-for-Rails/master/js_compilation/gmaps_google.js"></script>

<script type="text/javascript">
  $(document).on('ready', function() {
    var handler = Gmaps.build('Google', { markers: { clusterer: undefined }});
    handler.buildMap({ internal: { id: 'map' } }, function(){
      markers = handler.addMarkers([
      {

        "lat": <%= @lesson.latitude %>,
        "lng": <%= @lesson.longitude %>,
      },
      ]);
      handler.bounds.extendWith(markers);
      handler.fitMapToBounds();
    });
  })
</script>



